import os
import sys

sys.path.append(os.path.join(os.getcwd(), "scripts"))

import sysinfo

# HACK Ubuntu 64 bit gobject-introspection is not multilib
if os.path.exists("/usr/lib/girepository-1.0"):
    addpath("GI_TYPELIB_PATH", "/usr/lib/girepository-1.0")

def root():
    return os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

def moduleset_path(moduleset):
    return os.path.join(root(), "scripts", "modules",
                        "%s.modules" % moduleset)

def libdir(system=False):
    if system:
        base = "/usr"
    else:
        base = prefix

    if use_lib64:
        return os.path.join(base, "lib64")
    else:
        return os.path.join(base, "lib")

interact = not "SUGAR_BUILDBOT" in os.environ

use_local_modulesets = True
moduleset = [moduleset_path("system-%s" %
                            sysinfo.get_system_version()),
             moduleset_path("sugar")]
modules = ["meta-system", "meta-sugar"]

checkoutroot = os.path.join(root(), "source")
buildroot = os.path.join(root(), "build")
prefix = os.path.join(root(), "install")

os.environ["GTK_DATA_PREFIX"] = prefix
os.environ["GTK_PATH"] = os.path.join(libdir(), "gtk-2.0")
os.environ["GIO_EXTRA_MODULES"] = os.path.join(libdir(system=True),
                                               "gio", "modules")
